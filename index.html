<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Design Debt - Master Edition ğŸ¨</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;500;700&display=swap"
        rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg-color: #f0f2f5;
            --text-color: #1f2937;
            --primary-color: #3b82f6;
            /* Blue-500 */
            --primary-dark: #2563eb;
            --success-color: #10b981;
            /* Emerald-500 */
            --error-color: #ef4444;
            /* Red-500 */
            --card-width: 150px;
            --card-height: 220px;
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'IBM Plex Sans Arabic', sans-serif; // Consistent font
            background-color: var(--bg-color);
            color: var(--text-color);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Introduction Overlay */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(5px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            text-align: center;
            padding: 20px;
            animation: fadeIn 0.5s ease-out;
        }

        .overlay h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            color: var(--primary-dark);
            text-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .overlay p {
            font-size: 1.2rem;
            max-width: 600px;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #4b5563;
        }

        .btn {
            padding: 16px 48px;
            font-size: 1.2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 10px 20px -5px rgba(59, 130, 246, 0.5);
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px -5px rgba(59, 130, 246, 0.6);
        }

        .btn:active {
            transform: translateY(1px);
        }

        /* Header */
        header {
            width: 100%;
            max-width: 1200px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 40px;
            box-sizing: border-box;
            background: white;
            margin-top: 20px;
            border-radius: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }

        .level-badge {
            background: #e0e7ff;
            color: var(--primary-dark);
            padding: 8px 20px;
            border-radius: 50px;
            font-weight: 800;
            font-size: 1rem;
            letter-spacing: 0.5px;
        }

        .score-display {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--text-color);
        }

        .score-val {
            color: var(--primary-color);
        }

        /* Game Board */
        .game-board {
            width: 100%;
            max-width: 1200px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            padding: 20px;
            box-sizing: border-box;
            perspective: 1000px;
        }

        .zone-label {
            text-align: center;
            font-size: 0.9rem;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .card-row {
            display: flex;
            justify-content: center;
            gap: 25px;
            min-height: 240px;
        }

        /* ---- AMAZING CARD STYLES ---- */
        .card {
            width: var(--card-width);
            height: var(--card-height);
            background: white;
            border-radius: 16px;
            box-shadow:
                0 4px 6px -1px rgba(0, 0, 0, 0.1),
                0 2px 4px -1px rgba(0, 0, 0, 0.06),
                inset 0 0 0 1px rgba(255, 255, 255, 0.5);
            /* Inner highlight */
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            text-align: center;
            cursor: grab;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            user-select: none;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        /* Floating Animation */
        .card:not(.dragging):not(.problem):hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Dragging State - The magic feel */
        .card.dragging {
            opacity: 0.9;
            transform: scale(1.1) rotate(5deg) !important;
            /* Tilt while dragging */
            cursor: grabbing;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            z-index: 100;
        }

        .card-icon {
            font-size: 2rem;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .card-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-color);
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .card-desc {
            font-size: 0.75rem;
            color: #6b7280;
            line-height: 1.4;
        }

        /* Problem Card (Target) */
        .card.problem {
            background: linear-gradient(180deg, #fff5f5 0%, #fff 100%);
            border-top: 4px solid var(--error-color);
            /* Dashed border to indicate drop zone visually */
            border-bottom: 2px dashed #fed7d7;
        }

        .card.problem.drag-over {
            transform: scale(1.05);
            background: #fff0f0;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2);
            border-color: var(--error-color);
        }

        /* Solution Card (Draggable) */
        .card.solution {
            background: linear-gradient(180deg, #f0fdf4 0%, #fff 100%);
            border-top: 4px solid var(--success-color);
        }

        /* Success Animation css */
        @keyframes popSuccess {
            0% {
                transform: scale(1);
                opacity: 1;
            }

            50% {
                transform: scale(1.2);
                opacity: 0;
            }

            100% {
                transform: scale(0);
                opacity: 0;
            }
        }

        .matched {
            animation: popSuccess 0.4s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
        }

        /* Fail Shake */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            10%,
            30%,
            50%,
            70%,
            90% {
                transform: translateX(-4px);
            }

            20%,
            40%,
            60%,
            80% {
                transform: translateX(4px);
            }
        }

        .shake-it {
            animation: shake 0.4s cubic-bezier(.36, .07, .19, .97) both;
            border-color: var(--error-color) !important;
            box-shadow: 0 0 0 4px rgba(239, 68, 68, 0.2) !important;
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: white;
            color: var(--text-color);
            padding: 12px 30px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 3000;
            border: 1px solid #e5e7eb;
        }

        .toast.visible {
            transform: translateX(-50%) translateY(0);
        }

        .toast.success {
            border-left: 5px solid var(--success-color);
        }

        .toast.error {
            border-left: 5px solid var(--error-color);
        }

        /* Responsive */
        @media (max-width: 768px) {
            :root {
                --card-width: 100px;
                --card-height: 140px;
            }

            .card {
                padding: 10px;
            }

            .card-icon {
                font-size: 1.5rem;
            }

            .card-title {
                font-size: 0.8rem;
            }

            .card-desc {
                display: none;
            }

            /* Hide desc on mobile */
            header {
                padding: 15px;
            }

            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>

<body>

    <!-- Overlays -->
    <div class="overlay" id="intro-screen">
        <h1 style="font-family: 'IBM Plex Sans Arabic';">Design Debt ğŸƒ</h1>
        <p>Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø¨Ùƒ ÙÙŠ ØªØ­Ø¯ÙŠ Ø§Ù„Ù€ UX Ø§Ù„Ø£Ù‚ÙˆÙ‰.<br>Ù…Ù‡Ù…ØªÙƒ: ØªÙ†Ø¶ÙŠÙ Ø§Ù„Ø¯ÙŠÙˆÙ† Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆÙ…Ø´Ø§ÙƒÙ„ Ø§Ù„ØªØµÙ…ÙŠÙ….</p>
        <button class="btn" onclick="startGame()">Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªØ­Ø¯ÙŠ ğŸš€</button>
    </div>

    <div class="overlay" id="level-screen" style="display: none;">
        <h1>Ø¹Ø¸ÙŠÙŠÙŠÙ…! ğŸ‰</h1>
        <p id="level-msg">Ø£Ù†Ø¬Ø²Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø¨Ù†Ø¬Ø§Ø­.</p>
        <button class="btn" onclick="nextLevel()">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„ØªØ§Ù„ÙŠ â­ï¸</button>
    </div>

    <div class="overlay" id="end-screen" style="display: none;">
        <h1>Ø£Ø³Ø·ÙˆØ±Ø©! ğŸ†</h1>
        <p>Ø£Ù†Øª Ø®Ù„ØµØª ÙƒÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„. Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø¨Ù‚Ù‰ ÙÙ„Ø©!<br>Ø§Ù„Ø³ÙƒÙˆØ± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: <strong id="final-score"
                style="color:var(--primary-color); font-size:2rem;">0</strong></p>
        <button class="btn" onclick="location.reload()">Ø§Ù„Ø¹Ø¨ ØªØ§Ù†ÙŠ ğŸ”„</button>
    </div>

    <!-- UI -->
    <header>
        <div class="level-badge" id="level-indicator">Level 1</div>
        <div class="score-display">Points: <span id="score" class="score-val">0</span></div>
    </header>

    <div class="game-board">
        <!-- Drop Zone -->
        <div>
            <div class="zone-label">âš ï¸ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ (Ø§Ø±Ù… Ù‡Ù†Ø§)</div>
            <div class="card-row" id="problem-area"></div>
        </div>

        <!-- Drag Zone -->
        <div>
            <div class="zone-label">ğŸ’¡ Ø§Ù„Ø­Ù„ÙˆÙ„ (Ø§Ø³Ø­Ø¨)</div>
            <div class="card-row" id="solution-area"></div>
        </div>
    </div>

    <div class="toast" id="toast">Ready</div>

    <script>
        // Levels with Icons
        const levels = [
            {
                name: "Basic UI",
                pairs: [
                    { p: { icon: "ğŸ‘ï¸", text: "Low Contrast", desc: "Ø±Ù…Ø§Ø¯ÙŠ Ø¹Ù„Ù‰ Ø±Ù…Ø§Ø¯ÙŠ" }, s: { icon: "âœ¨", text: "High Contrast", desc: "Ø£Ø³ÙˆØ¯ ÙˆØ§Ø¶Ø­" } },
                    { p: { icon: "ğŸ–¼ï¸", text: "Broken Img", desc: "Ø£ÙŠÙ‚ÙˆÙ†Ø© Ù…ÙƒØ³ÙˆØ±Ø©" }, s: { icon: "ğŸ“", text: "Alt Text", desc: "Ù†Øµ Ø¨Ø¯ÙŠÙ„" } },
                    { p: { icon: "ğŸ”", text: "Tiny Font", desc: "Ø®Ø· Ù†Ù…Ù„Ø© 10px" }, s: { icon: "A+", text: "Readable", desc: "Ø®Ø· 16px+" } },
                    { p: { icon: "ğŸ¨", text: "Bad Colors", desc: "Ø£Ù„ÙˆØ§Ù† Ø¨ØªÙˆØ¬Ø¹ Ø§Ù„Ø¹ÙŠÙ†" }, s: { icon: "ğŸ­", text: "Palette", desc: "Ø£Ù„ÙˆØ§Ù† Ù…ØªÙ†Ø§Ø³Ù‚Ø©" } }
                ]
            },
            {
                name: "Navigation",
                pairs: [
                    { p: { icon: "ğŸš«", text: "Dead End", desc: "Ù…ÙÙŠØ´ Ø®Ø±ÙˆØ¬" }, s: { icon: "ğŸ”™", text: "Back Btn", desc: "Ø²Ø±Ø§Ø± Ø±Ø¬ÙˆØ¹" } },
                    { p: { icon: "â“", text: "Mystery Btn", desc: "Ø²Ø±Ø§Ø± Ù…Ø´ Ù…ÙÙ‡ÙˆÙ…" }, s: { icon: "ğŸ·ï¸", text: "Label", desc: "Ø§Ø³Ù… ÙˆØ§Ø¶Ø­" } },
                    { p: { icon: "ğŸ”", text: "Hidden Menu", desc: "Ù…ÙŠÙ†ÙŠÙˆ Ù…Ø®ÙÙŠØ©" }, s: { icon: "ğŸ‘€", text: "Visible", desc: "Ù„ÙŠÙ†ÙƒØ§Øª Ø¸Ø§Ù‡Ø±Ø©" } },
                    { p: { icon: "ğŸš§", text: "404 Page", desc: "ØµÙØ­Ø© ÙØ§Ø¶ÙŠØ©" }, s: { icon: "ğŸ”—", text: "Redirect", desc: "ØªØ­ÙˆÙŠÙ„ Ù„Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" } }
                ]
            },
            {
                name: "Performance",
                pairs: [
                    { p: { icon: "ğŸŒ", text: "Slow Load", desc: "10 Ø«ÙˆØ§Ù†ÙŠ ØªØ­Ù…ÙŠÙ„" }, s: { icon: "âš¡", text: "Lazy Load", desc: "ØªØ­Ù…ÙŠÙ„ Ø°ÙƒÙŠ" } },
                    { p: { icon: "ğŸ“¹", text: "Huge Video", desc: "ÙÙŠØ¯ÙŠÙˆ 500MB" }, s: { icon: "ğŸ“¦", text: "Compress", desc: "Ø¶ØºØ· Ø§Ù„ÙÙŠØ¯ÙŠÙˆ" } },
                    { p: { icon: "ğŸ§±", text: "Blocking", desc: "Ø´Ø§Ø´Ø© Ø¨ÙŠØ¶Ø§Ø¡" }, s: { icon: "ğŸ”„", text: "Async", desc: "ØªØ­Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©" } },
                    { p: { icon: "ğŸ“", text: "Layout Shift", desc: "Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø¨ØªÙ†Ø·" }, s: { icon: "ğŸ“", text: "Fixed Size", desc: "Ø£Ø¨Ø¹Ø§Ø¯ Ø«Ø§Ø¨ØªØ©" } }
                ]
            },
            {
                name: "Content",
                pairs: [
                    { p: { icon: "ğŸ’¬", text: "Lorem Ipsum", desc: "Ù†Øµ ØªØ¬Ø±ÙŠØ¨ÙŠ" }, s: { icon: "âœï¸", text: "Real Copy", desc: "Ù…Ø­ØªÙˆÙ‰ Ø­Ù‚ÙŠÙ‚ÙŠ" } },
                    { p: { icon: "ğŸ¤–", text: "Error 0x54", desc: "ÙƒÙˆØ¯ Ù…Ø­Ø¯Ø´ ÙØ§Ù‡Ù…Ù‡" }, s: { icon: "ğŸ˜Š", text: "Friendly", desc: "Ø±Ø³Ø§Ù„Ø© Ù„Ø·ÙŠÙØ©" } },
                    { p: { icon: "ğŸ”—", text: "Click Here", desc: "Ø§Ø¶ØºØ· Ù‡Ù†Ø§" }, s: { icon: "ğŸ“¥", text: "Download", desc: "Ø­Ù…Ù„ Ø§Ù„Ù…Ù„Ù" } },
                    { p: { icon: "ğŸ§±", text: "Wall of Text", desc: "Ø¨Ù„ÙˆÙƒ Ù†Øµ ÙƒØ¨ÙŠØ±" }, s: { icon: "ğŸ“‘", text: "Headers", desc: "Ø¹Ù†Ø§ÙˆÙŠÙ† ÙˆÙ†Ù‚Ø·" } }
                ]
            },
            {
                name: "Security & Scale",
                pairs: [
                    { p: { icon: "ğŸ", text: "Spaghetti", desc: "ÙƒÙˆØ¯ Ù…ØªØ¯Ø§Ø®Ù„" }, s: { icon: "ğŸ—ï¸", text: "Modular", desc: "Ù†Ø¸Ø§Ù… Ù…ÙˆØ¯Ø±Ù†" } },
                    { p: { icon: "ğŸ”“", text: "Exposed API", desc: "Ù…ÙØªØ§Ø­ Ø³Ø±ÙŠ" }, s: { icon: "ğŸ”’", text: "Encryption", desc: "ØªØ´ÙÙŠØ±" } },
                    { p: { icon: "ğŸ“±", text: "Non-Responsive", desc: "Ù…Ø´ Ø´ØºØ§Ù„ Ù…ÙˆØ¨Ø§ÙŠÙ„" }, s: { icon: "ğŸ“", text: "Responsive", desc: "Ù…ØªØ¬Ø§ÙˆØ¨" } },
                    { p: { icon: "ğŸ˜¶", text: "No Feedback", desc: "Ù…ÙÙŠØ´ Ø±Ø¯ ÙØ¹Ù„" }, s: { icon: "â³", text: "Vizu", desc: "Ù„ÙˆÙŠÙŠÙ†Ø¬" } }
                ]
            }
        ];

        let state = {
            level: 0,
            score: 0,
            matches: 0
        };

        function startGame() {
            document.getElementById('intro-screen').style.display = 'none';
            loadLevel(0);
        }

        function loadLevel(idx) {
            state.level = idx;
            state.matches = 0;
            const lvl = levels[idx];

            document.getElementById('level-indicator').innerText = `Level ${idx + 1}: ${lvl.name}`;
            document.getElementById('level-screen').style.display = 'none';

            // Prepare Data
            const problems = lvl.pairs.map((pair, i) => ({ ...pair.p, id: i, type: 'p' }));
            const solutions = lvl.pairs.map((pair, i) => ({ ...pair.s, id: i, type: 's' }));

            // Render
            renderCards('problem-area', problems.sort(() => .5 - Math.random()));
            renderCards('solution-area', solutions.sort(() => .5 - Math.random()));
        }

        function renderCards(containerId, items) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            items.forEach(item => {
                const el = document.createElement('div');
                el.className = `card ${item.type === 'p' ? 'problem' : 'solution'}`;
                if (item.type === 's') el.draggable = true;

                el.dataset.id = item.id;
                el.innerHTML = `
                    <div class="card-icon">${item.icon}</div>
                    <div class="card-title">${item.text}</div>
                    <div class="card-desc">${item.desc}</div>
                `;

                // Events
                if (item.type === 'p') {
                    el.addEventListener('dragover', e => {
                        e.preventDefault();
                        el.classList.add('drag-over');
                    });
                    el.addEventListener('dragleave', () => el.classList.remove('drag-over'));
                    el.addEventListener('drop', handleDrop);
                } else {
                    el.addEventListener('dragstart', e => {
                        e.dataTransfer.setData('text/plain', item.id);
                        el.classList.add('dragging');
                    });
                    el.addEventListener('dragend', () => el.classList.remove('dragging'));
                }

                container.appendChild(el);
            });
        }

        function handleDrop(e) {
            e.preventDefault();
            const target = e.currentTarget;
            target.classList.remove('drag-over');

            const dropId = target.dataset.id;
            const dragId = e.dataTransfer.getData('text/plain');

            if (!dragId) return; // Ghost drag check

            // Find solution card element (the one being dragged)
            // Note: dragend removes 'dragging' class, so we might need selector by data-id in solution area
            const draggedEl = document.querySelector(`.card.solution[data-id="${dragId}"]`);

            if (dropId === dragId) {
                // Success
                state.score += 10;
                updateScore();
                showToast("Correct! +10", "success");

                target.classList.add('matched');
                draggedEl.classList.add('matched');

                // Confetti Burst for single match
                confetti({
                    particleCount: 50,
                    spread: 60,
                    origin: { y: 0.7 }
                });

                state.matches++;
                if (state.matches === 4) completeLevel();

            } else {
                // Fail
                state.score -= 5;
                updateScore();
                showToast("Try Again -5", "error");
                target.classList.add('shake-it');
                setTimeout(() => target.classList.remove('shake-it'), 500);
            }
        }

        function updateScore() {
            document.getElementById('score').innerText = state.score;
        }

        function showToast(msg, type) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.className = `toast visible ${type}`;
            setTimeout(() => toast.classList.remove('visible'), 1500);
        }

        function completeLevel() {
            setTimeout(() => {
                // BIG CELEBRATION
                var duration = 3 * 1000;
                var animationEnd = Date.now() + duration;
                var defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };

                var interval = setInterval(function () {
                    var timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) {
                        return clearInterval(interval);
                    }
                    var particleCount = 50 * (timeLeft / duration);
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
                }, 250);

                if (state.level < levels.length - 1) {
                    document.getElementById('level-screen').style.display = 'flex';
                } else {
                    document.getElementById('end-screen').style.display = 'flex';
                    document.getElementById('final-score').innerText = state.score;
                }
            }, 1000);
        }

        function nextLevel() {
            loadLevel(state.level + 1);
        }

        function randomInRange(min, max) {
            return Math.random() * (max - min) + min;
        }

    </script>
</body>

</html>